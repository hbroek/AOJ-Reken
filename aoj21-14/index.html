<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14 - Calendar Picker || Advent of JavaScript</title>
    <link rel="stylesheet" href="./styles.css" />
</head>


<body>
    <script>
        let calendarDate = new Date();
        let todayDate = calendarDate.getDate();

        const isSameMonth = (date1, date2) => {
            return date1.getFullYear() === date2.getFullYear()
                && date1.getMonth() == date2.getMonth();
        }
    </script>
    <script data-calc>
        let currentDate = new Date(calendarDate.getTime())
        currentDate.setDate(1);
        let title = `${currentDate.getFullYear()} - ${currentDate.toLocaleString('default', { month: 'long' })}`;

        today = isSameMonth(calendarDate, new Date())?todayDate:-1;
 
        let currentDay = currentDate.getDay();
        let currentMonth = currentDate.getMonth();

        calendar = [] // Will contain the day numbers lined up with the grid cells

        // prefill calendar with empty days
        for (let i=0;i<currentDay;i++) {
            calendar.push('')
        }

        // fill dates with date numbers
        let i = 1;
        currentDate.setDate(i)
        while(currentMonth==currentDate.getMonth()) {
            calendar.push(''+(i++))
            currentDate.setDate(i)
        }

        // post fill calendar with empty days
        while (calendar.length<42) {
            calendar.push('')
        }
    </script>

    <div class="wrapper">

        <div class="previous">
            <img src="images/previous.svg" alt="Previous" data-action="calendarDate.setMonth(calendarDate.getMonth()-1)" />
        </div>

        <div class="month" data-text="${title}">December</div>

        <div class="next">
            <img src="images/next.svg" alt="Next" data-action="calendarDate.setMonth(calendarDate.getMonth()+1)"/>
        </div>

        <div class="day-of-week">S</div>
        <div class="day-of-week">M</div>
        <div class="day-of-week">T</div>
        <div class="day-of-week">W</div>
        <div class="day-of-week">T</div>
        <div class="day-of-week">F</div>
        <div class="day-of-week">S</div>

        <day index="0"></day>
        <day index="1"></day>
        <day index="2"></day>
        <day index="3"></day>
        <day index="4"></day>
        <day index="5"></day>
        <day index="6"></day>
        <day index="7"></day>
        <day index="8"></day>
        <day index="9"></day>
        <day index="10"></day>
        <day index="11"></day>
        <day index="12"></day>
        <day index="13"></day>
        <day index="14"></day>
        <day index="15"></day>
        <day index="16"></day>
        <day index="17"></day>
        <day index="18"></day>
        <day index="19"></day>
        <day index="20"></day>
        <day index="21"></day>
        <day index="22"></day>
        <day index="23"></day>
        <day index="24"></day>
        <day index="25"></day>
        <day index="26"></day>
        <day index="27"></day>
        <day index="28"></day>
        <day index="29"></day>
        <day index="30"></day>
        <day index="31"></day>
        <day index="32"></day>
        <day index="33"></day>
        <day index="34"></day>
        <day index="35"></day>
        <day index="36"></day>
        <day index="37"></day>
        <day index="38"></day>
        <day index="39"></day>
        <day index="40"></day>
        <day index="41"></day>

    </div>
    <script src="app.js"></script>
</body>
<template data-component="day" data-arg-index>
    <div
        data-class="today:today==calendar[index]" data-text="${calendar[index]}">
    </div>
</template>
<script src="https://cdn.jsdelivr.net/gh/hbroek/reken/dist/reken.min.js"></script>
</html>