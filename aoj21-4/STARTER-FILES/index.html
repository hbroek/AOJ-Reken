<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>04 - Eyes on the Screen || Advent of JavaScript</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body data-on-keydown="checkKey(e.key)">
  <script>
    const keys = [
      ['`','1','2','3','4','5','6','7','8','9','0','-','=','BACKSPACE'],
      ['TAB','Q','W','E','R','T','Y','U','I','O','P','[',']','\\'],
      ['CAPSLOCK', 'A','S','D','F','G','H','J','K','L',';','\'','ENTER'],
      ['SHIFT','Z','X','C','V','B','N','M',',','.','/','SHIFT']
    ]
    const labelOverride = {
      'BACKSPACE':'DEL',
      'TAB': 'Tab',
      'CAPSLOCK': 'CAPS',
    }
    const utilityKeys = {
      'CAPSLOCK':'',
      'ENTER':'',
      'SHIFT':'',
      'TAB':'',
    }
    const newKey = () => keyList[Math.floor(Math.random()*keyList.length)]
    let keyList = keys.reduce((keyList, row) => keyList = [...keyList, ...row]) // expand 4 rows of keys into 1 row.
    let current = newKey();
    const checkKey = (key) => {if (key.toUpperCase()===current){current=newKey()}};
  </script>

  <h1>Eyes on the Screen</h1>
  <div class="keyboard" data-for="r:keys">
    <div class="row" data-for="k:r.item">
      <button data-action="checkKey(k.item)" data-on-keydown="checkKey(e.key)" class="key" data-class="utility:utilityKeys[k.item]==='';jiggle:current===k.item" data-attr-key="${k.item}" data-text="${labelOverride[k.item]??k.item}"></button>
    </div>
  </div>
  <script src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/hbroek/reken/dist/reken.min.js"></script>

</body>

</html>